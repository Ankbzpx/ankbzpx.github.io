<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-badge-generation-using-polygon-offset" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Badge Generation using Polygon Offset | Ruichen Zheng</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ankbzpx.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ankbzpx.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ankbzpx.github.io/badge-generation-using-polygon-offset"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Badge Generation using Polygon Offset | Ruichen Zheng"><meta data-rh="true" name="description" content="This is a mesh generation projection I have worked on in industry. The goal is straightforward: given a cover image, generate a badge like textured 3D model, with its edge customizable by artists."><meta data-rh="true" property="og:description" content="This is a mesh generation projection I have worked on in industry. The goal is straightforward: given a cover image, generate a badge like textured 3D model, with its edge customizable by artists."><link data-rh="true" rel="icon" href="/img/ank.svg"><link data-rh="true" rel="canonical" href="https://ankbzpx.github.io/badge-generation-using-polygon-offset"><link data-rh="true" rel="alternate" href="https://ankbzpx.github.io/badge-generation-using-polygon-offset" hreflang="en"><link data-rh="true" rel="alternate" href="https://ankbzpx.github.io/badge-generation-using-polygon-offset" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1605a30f.css">
<script src="/assets/js/runtime~main.6075d01e.js" defer="defer"></script>
<script src="/assets/js/main.173b99f4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ank.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/ank.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ruichen Zheng</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Projects</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Ankbzpx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neural-implicit-octahedral-field">Neural Implicit Octahedral Field (WIP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/badge-generation-using-polygon-offset">Badge Generation using Polygon Offset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/visibility-field">Learning Visibility Field for Detailed 3D Human Reconstruction and Relighting</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Badge Generation using Polygon Offset</span><meta itemprop="position" content="1"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>Badge Generation using Polygon Offset</h1>
<p>This is a mesh generation projection I have worked on in industry. The goal is straightforward: given a cover image, generate a badge like textured 3D model, with its edge customizable by artists.</p>
<div class="container"><div class="row"><div class="col col--4"><img src="/img/polygon_offset/britz.png"></div><div class="col col--4"><img src="/img/polygon_offset/bezier.png"></div><div class="col col--4"><div style="position:relative;width:100%;height:100%;overflow:hidden;pointer-events:auto"><div style="width:100%;height:100%"><canvas style="display:block"></canvas></div></div></div></div><p style="text-align:center">Pipeline using my fan art of <a href="https://forlittletail.fandom.com/wiki/Britz_Strudel" target="_blank" rel="noopener noreferrer">Britz</a> as cover image</p></div>
<p>Under initial assessment, the edge can be customized with a curve editor, and the generation is a perfect use case for Blender <a href="https://en.wikibooks.org/wiki/Blender_3D:_Noob_to_Pro/Bevelling_a_Curve" target="_blank" rel="noopener noreferrer">bevel modifier</a>. However, the latter introduces self-intersection that are non-trivial to resolve--the only solution I found is to tetrahedralize everything then filter using <a href="https://igl.ethz.ch/projects/winding-number/" target="_blank" rel="noopener noreferrer">generalized winding number</a>, but my attempt failed due to the crash of <a href="https://wias-berlin.de/software/index.jsp?id=TetGen&amp;lang=1" target="_blank" rel="noopener noreferrer">TetGen</a>.</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/blender_bevel_1.png"></div><div class="col col--6"><img src="/img/polygon_offset/polygon_offset_1.png"></div><div class="col col--6"><img src="/img/polygon_offset/blender_bevel_2.png"></div><div class="col col--6"><img src="/img/polygon_offset/polygon_offset_2.png"></div><div class="col col--6"><p style="text-align:center">Blender bevel</p></div><div class="col col--6"><p style="text-align:center">Polygon offset</p></div></div></div>
<p>After observing a sample model made by our 3D artist, I was immediately intrigued--it&#x27;s quad, with boundary aligned edge loops beautifully propagating towards middle like ripples. He specifically emphasized the importance of those edge loops placement, so I decided to mimic it by polygon offset.</p>
<p>Start by extracting contours of cover image and cutting user specified edge curve into segments. The horizontal projection of each segments determines the offset distance.</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/contour.png"><p style="text-align:center">Contour extraction</p></div><div class="col col--6"><img src="/img/polygon_offset/bezier_split.png"><p style="text-align:center">Curve segment</p></div></div></div>
<p>To offset the polygon, I implemented the <a href="https://mcmains.me.berkeley.edu/pubs/DAC05OffsetPolygon.pdf" target="_blank" rel="noopener noreferrer">algorithm <cite> proposed by Chen et al.</cite></a>. First offset and connect each segments, then use winding number (using <a href="https://www.glprogramming.com/red/chapter11.html" target="_blank" rel="noopener noreferrer">GLU</a>) to filter boundary polygon.</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/offset_raw.png"><p style="text-align:center">Polygon offset</p></div><div class="col col--6"><img src="/img/polygon_offset/offset_filter.png"><p style="text-align:center">Offset cleanup</p></div></div></div>
<p>The next step is to tessellate the gap between two polygons. Due to shrinkage (sometimes topology change), connecting closest vertices is prone to self intersection. The 2D tessellate methods, such as line sweeping, are also not applicable due to height difference. The feasible solution I found is the Delaunay triangulation.</p>
<p>Since it produces a convex hull, I filtered out simplices that have barycenter outside the gap, as well as edges that intersects exterior / interior polygons. The recover of simplices is the problem of <a href="https://stackoverflow.com/questions/4022662/find-all-chordless-cycles-in-an-undirected-graph" target="_blank" rel="noopener noreferrer">finding all chordless cycles in undirected graph</a>, that can be solved using <a href="https://stackoverflow.com/questions/838076/small-cycle-finding-in-a-planar-graph" target="_blank" rel="noopener noreferrer">wall-walking algorithm</a>, by marking the directed edge traversal (boundary once, elsewhere twice).</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/delaunay_raw.png"><p style="text-align:center">Delaunay triangulation</p></div><div class="col col--6"><img src="/img/polygon_offset/delaunay_filter.png"><p style="text-align:center">Triangulation cleanup</p></div></div></div>
<p>As illustrated below, it is quite robust.</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/delaunay_sample_1.png"></div><div class="col col--6"><img src="/img/polygon_offset/delaunay_sample_2.png"></div><div class="col col--6"><img src="/img/polygon_offset/delaunay_sample_3.png"></div><div class="col col--6"><img src="/img/polygon_offset/delaunay_all.png"></div></div><p style="text-align:center">Side triangulations. The bottom right being the concatenation of all segments</p></div>
<p>Though not occur in this cover image, it can handle topology change, as demonstrated in the toy example below.</p>
<div class="container"><div class="row row--no-gutters"><div class="col col--6"><img src="/img/polygon_offset/topology_offset.png"></div><div class="col col--6"><img src="/img/polygon_offset/topology_delaunay.png"></div></div><p style="text-align:center">Handle topology change</p></div>
<p>With polygons successfully tessellated, I use Blender to perform the rest (remove duplicated vertices, assign UV, texture)</p>
<p><strong>Afterthoughts</strong> Though the proposed method is robust, reasonably fast (around 3 seconds) and can produce meaningful edge loops, it regrettably gives triangle mesh that cannot completely fulfill the artists&#x27; needs. Nevertheless, it is the project that brought me in and captivated me in geometry processing.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/neural-implicit-octahedral-field"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Neural Implicit Octahedral Field (WIP)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/visibility-field"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Learning Visibility Field for Detailed 3D Human Reconstruction and Relighting</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 Ruichen Zheng, built with Docusaurus.</div></div></div></footer></div>
</body>
</html>